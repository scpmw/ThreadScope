TODO ------------------------------------------------------------------------

Satnam:

Simon:
  - ThreadScope DEADLOCKs occasionally, more often with --debuug, why?
  - X Window System error sometimes?
  - opening a non-existent file failure
  - background of some widgets on Windows are white when they are grey in Linux
  - when nothing is loaded, show a message to that effect in the window
  - Make ^C work on Windows

- resizing the panes causes a grab lockup?
- jump to bookmark doesn't work in events window
- sort bookmark view by time?
- double-click a bookmark to jump to it?
- Delete key deletes bookmarks?
- hotkey to add a bookmark?

FIRST RELEASE ---------------------------------------------------------------

All of above

BUGS ------------------------------------------------------------------------

NOT QUITE DONE: - crash when zooming in too far (negative exponent)
- scrolling to the right, we get some over-rendering at the boundary
  causing a thick line
- scrolling when event labels are on chops off some labels
- rendering bug when scrolling: we need to clip to the rectangle being
  drawn, otherwise we overwrite other parts of the window when there
  are long bars being drawn, which makes some events disappear.
- scrolling to the right at the end of the trace leaves an extra blue
  line at the top.
- the vertical blue cursor line vanishes is some zoom levels
- sideways scrolling leaves curve rendering artifacts (e.g., the thicker
  fragments of the flat line at the end of the Activity graph)
- sometimes 2 labels are written on top of each other even at max zoom,
  e.g. "thread 3 yielding" and "thread 3 is runnable"
- sometimes 2 tick labels (showing time) overlap
- may be a feature: filling graphs with colours is from line 1 upwards,
  not line 0, so lines at level 0 seem under the filled area, not level with it
- the light blue vertical lines get sometimes randomly darker when scrolling
  by moving the scrollbar handle slowly to the right (probably caused
  by testing an x coordinate up to integral division by slice or without
  taking into account the hadj_value, so the line is drawn
  many times when scrolling)
- a few levels of zoom in and then zoom out sometimes results in only
  a right fragment of the timeline shown, no indication in the scrollbar
  that scroll is possible, but scrolling indeed fixes the view

IDEAS ------------------------------------------------------------------------

NAVIGATION
- click and drag the view
- shift-click and drag to zoom to a region
- draw the detailed view in the background
- bookmarks

  - add/remove
  - save
  - measure the time between two markers
- search for events in the event window

UI
- render averaged areas properly
- indicate when one thread wakes up another thread, or a thread is migrated
  - draw lines/arrows between the events?
- event list view
  - respond to page up / page down / arrows (FOCUS)
  - interact with bookmarks
- left pane for
  - bookmarks
  - list of traces
    - traces would be a tree-view, e.g.
      * HECs
        * 0
        * 1 etc.
      * Threads
        * 0
        * 1 etc.
      * RTS
        * live heap
      * ETW / Linux Performance counters
        * cache misses
        * stalls
        * etc.
     - clicking on a trace adds that trace to the view, clicking again
       removes it
     - some way to reorder the traces?
     - when rendering threads, we want some way to indicate the time
       between creation and death - colour grey?
- a better progress bar

OTHER
- catch exceptions in event handlers and emit a helpful error message of some
  kind.  tryEvent swallows exceptions, so it's not good enough.
- move the text entents stuff out of drawing ThreadRuns
- overlay ETW events
- integrate strace events in the event view on Linux
- colour threads differently
- thread names rather than numbers
- live heap graph
- summary analysis


DONE
  - tidy up menu option
  - overlaps should be gone now. fix ticks
  - key is messed up (we shouldn't be using fixed coordinates here, font
    sizes are variable)
  - when there are no events, we crash in last
  - fix event colours (key doesn't match)
  - fix the ticks: labels overlap sometimes
  - don't draw overlapping labels
  - spark conversion and spark pool size graphs
